<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bri üíò</title>

  <style>
    :root {
      --bg1: #0d0208;
      --bg2: #1a0a0f;
      --card: rgba(15, 5, 8, 0.92);
      --text: #2c1810;
      --muted: rgba(60, 40, 30, 0.75);
      --accent: #c9184a;
      --accent2: #800f2f;
      --gold: #d4af37;
      --shadow: 0 25px 60px rgba(0, 0, 0, 0.6);
      --radius: 20px;
    }

    * { 
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: 
        radial-gradient(circle at 50% 20%, rgba(201, 24, 74, 0.12), transparent 60%),
        linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%);
      color: var(--text);
      font-family: 'Georgia', 'Times New Roman', serif;
      overflow: hidden;
      padding: 40px 24px;
      position: relative;
    }

    /* Curtains */
    .curtain-container {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 5;
      overflow: hidden;
    }

    .curtain {
      position: absolute;
      top: 0;
      width: 50%;
      height: 100%;
      background: 
        linear-gradient(90deg,
          #6d0019 0%,
          #8b0020 20%,
          #6d0019 40%,
          #5a0014 60%,
          #6d0019 80%,
          #8b0020 100%
        );
      box-shadow: 
        inset 0 0 120px rgba(0, 0, 0, 0.6),
        inset 10px 0 30px rgba(0, 0, 0, 0.4);
      transition: transform 2.5s cubic-bezier(0.65, 0, 0.35, 1);
    }

    .curtain::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50px;
      background: linear-gradient(to bottom, rgba(255, 215, 0, 0.15), transparent);
      border-bottom: 1px solid rgba(255, 215, 0, 0.2);
    }

    .curtain::after {
      content: '';
      position: absolute;
      inset: 0;
      background: 
        repeating-linear-gradient(
          90deg,
          transparent 0px,
          rgba(0, 0, 0, 0.05) 15px,
          transparent 30px
        ),
        repeating-linear-gradient(
          0deg,
          transparent 0px,
          rgba(0, 0, 0, 0.08) 50px,
          transparent 100px
        );
    }

    .curtain-left {
      left: 0;
      transform-origin: left;
    }

    .curtain-right {
      right: 0;
      transform-origin: right;
    }

    .curtains-open .curtain-left {
      transform: translateX(-100%);
    }

    .curtains-open .curtain-right {
      transform: translateX(100%);
    }

    /* Spotlights */
    .spotlight {
      position: fixed;
      width: 500px;
      height: 700px;
      pointer-events: none;
      z-index: 10;
      opacity: 0;
      transition: opacity 1.2s ease;
    }

    .spotlight.active {
      opacity: 0.7;
    }

    .spotlight-left {
      top: -150px;
      left: 10%;
      background: radial-gradient(
        ellipse 250px 350px at 60% 25%,
        rgba(255, 250, 220, 0.18),
        rgba(255, 250, 220, 0.08) 50%,
        transparent 75%
      );
    }

    .spotlight-right {
      top: -150px;
      right: 10%;
      background: radial-gradient(
        ellipse 250px 350px at 40% 25%,
        rgba(255, 250, 220, 0.18),
        rgba(255, 250, 220, 0.08) 50%,
        transparent 75%
      );
    }

    /* Stage floor */
    .stage-floor {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 80px;
      background: linear-gradient(to bottom, #1a0f0f, #0d0505);
      border-top: 2px solid rgba(255, 215, 0, 0.15);
      z-index: 1;
      box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.6);
    }

    .card {
      width: min(600px, 100%);
      background: 
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(139, 69, 19, 0.03) 2px,
          rgba(139, 69, 19, 0.03) 4px
        ),
        repeating-linear-gradient(
          90deg,
          transparent,
          transparent 2px,
          rgba(139, 69, 19, 0.02) 2px,
          rgba(139, 69, 19, 0.02) 4px
        ),
        linear-gradient(135deg, #f4e8d0 0%, #e8d5b7 50%, #f0e2c8 100%);
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: var(--radius);
      box-shadow: 
        0 25px 60px rgba(0, 0, 0, 0.7),
        inset 0 0 60px rgba(139, 69, 19, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.4);
      padding: 48px 40px;
      position: relative;
      z-index: 3;
    }

    .card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: 
        radial-gradient(ellipse at 20% 30%, rgba(139, 69, 19, 0.08), transparent 40%),
        radial-gradient(ellipse at 80% 70%, rgba(139, 69, 19, 0.06), transparent 40%),
        radial-gradient(ellipse at 50% 50%, rgba(210, 180, 140, 0.1), transparent 60%);
      border-radius: var(--radius);
      pointer-events: none;
    }

    .card::after {
      content: '';
      position: absolute;
      inset: 0;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" /></filter><rect width="100" height="100" filter="url(%23noise)" opacity="0.03"/></svg>');
      border-radius: var(--radius);
      pointer-events: none;
      mix-blend-mode: multiply;
    }

    .badge {
      display: inline-flex;
      gap: 10px;
      align-items: center;
      padding: 8px 16px;
      border-radius: 100px;
      border: 1px solid rgba(139, 69, 19, 0.4);
      background: rgba(139, 69, 19, 0.12);
      color: rgba(100, 60, 30, 0.9);
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.3px;
      position: relative;
      z-index: 1;
    }

    .badge .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 8px rgba(201, 24, 74, 0.6);
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    h1 {
      margin: 24px 0 16px;
      font-size: clamp(36px, 5vw, 52px);
      line-height: 1.1;
      font-weight: 300;
      letter-spacing: 1px;
      position: relative;
      z-index: 1;
    }

    p {
      margin: 0 0 20px;
      color: var(--muted);
      font-size: 16px;
      line-height: 1.6;
      position: relative;
      z-index: 1;
    }

    .question {
      margin: 32px 0 8px;
      font-size: clamp(24px, 3vw, 32px);
      font-weight: 400;
      text-align: center;
      letter-spacing: 0.5px;
      line-height: 1.3;
      position: relative;
      z-index: 1;
    }

    .btns {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      margin-top: 32px;
      position: relative;
      min-height: 56px;
      justify-content: center;
      z-index: 1;
    }

    button {
      border: none;
      cursor: pointer;
      padding: 16px 32px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 500;
      letter-spacing: 0.3px;
      transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      position: relative;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    }

    button:active { 
      transform: translateY(0); 
    }

    .no {
      background: rgba(30, 15, 18, 0.8);
      color: #ffffff;
      border: 1px solid rgba(255, 215, 0, 0.2);
      z-index: 1;
    }

    .yes {
      background: linear-gradient(135deg, var(--accent), #ff1744);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
      z-index: 2;
    }

    .yes:hover {
      box-shadow: 
        0 8px 24px rgba(201, 24, 74, 0.5),
        0 0 0 1px rgba(255, 255, 255, 0.3) inset;
    }

    .footer {
      margin-top: 32px;
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      color: var(--muted);
      opacity: 0.7;
      position: relative;
      z-index: 1;
    }

    .heart {
      color: var(--accent);
    }

    .hidden {
      display: none;
    }

    .center {
      text-align: center;
    }

    .next-btn {
      margin-top: 24px;
      background: linear-gradient(135deg, var(--accent2), var(--accent));
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .modal {
      position: fixed;
      inset: 0;
      display: none;
      place-items: center;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(12px);
      z-index: 100;
      padding: 24px;
    }

    .modal.open { display: grid; }

    .modal-card {
      background: 
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(139, 69, 19, 0.03) 2px,
          rgba(139, 69, 19, 0.03) 4px
        ),
        repeating-linear-gradient(
          90deg,
          transparent,
          transparent 2px,
          rgba(139, 69, 19, 0.02) 2px,
          rgba(139, 69, 19, 0.02) 4px
        ),
        linear-gradient(135deg, #f4e8d0 0%, #e8d5b7 50%, #f0e2c8 100%);
      border: 2px solid rgba(139, 69, 19, 0.3);
      border-radius: var(--radius);
      padding: 48px 40px;
      max-width: 520px;
      text-align: center;
      box-shadow: 
        0 40px 100px rgba(0, 0, 0, 0.8),
        inset 0 0 60px rgba(139, 69, 19, 0.08);
    }

    .modal-card h2 {
      font-size: clamp(28px, 4vw, 40px);
      margin-bottom: 20px;
      font-weight: 300;
      letter-spacing: 0.5px;
      color: var(--text);
    }

    .modal-card p {
      color: var(--muted);
    }

    canvas#confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 90;
    }

    /* Rose petals */
    .rose-petal {
      position: fixed;
      width: 10px;
      height: 14px;
      background: radial-gradient(ellipse, var(--accent), var(--accent2));
      border-radius: 50% 50% 50% 0;
      opacity: 0.5;
      pointer-events: none;
      z-index: 8;
      animation: fall linear forwards;
    }

    @keyframes fall {
      to {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
  </style>
</head>

<body>
  <div class="curtain-container">
    <div class="curtain curtain-left"></div>
    <div class="curtain curtain-right"></div>
  </div>

  <div class="spotlight spotlight-left"></div>
  <div class="spotlight spotlight-right"></div>
  <div class="stage-floor"></div>

  <canvas id="confetti"></canvas>

  <!-- Replace 'your-song.mp3' with your own audio file in the same folder as this HTML -->
  <audio id="yesMusic">
    <source src="your-song.mp3" type="audio/mpeg">
  </audio>

  <audio id="drumAudio">
    <source src="https://cdn.pixabay.com/audio/2022/03/10/audio_4dedf4bb94.mp3" type="audio/mpeg">
  </audio>

  <main class="card">
    <div class="badge">
      <span class="dot"></span>
      <span>A Most Important Inquiry</span>
    </div>

    <h1>Bri üíò</h1>

    <!-- INTRO -->
    <section id="intro">
      <p>
        If you're reading this, I am dying (sick and I couldn't come see you),
        so in my infinite wisdom I decided to come up with a backup plan!
      </p>
      <button class="next-btn" id="toDrumroll">Okay‚Ä¶</button>
    </section>

    <!-- DRUMROLL -->
    <section id="drumroll" class="hidden center">
      <p>Okay but first‚Ä¶</p>
      <h2 id="drumText">ü•Å</h2>
    </section>

    <!-- QUESTION -->
    <section id="questionSection" class="hidden">
      <div class="question">Bri, will you be my Valentine?</div>
      <div class="btns" id="btns">
        <button class="yes" id="yesBtn">Yes :)))</button>
        <button class="no" id="noBtn">No üòÖ</button>
      </div>
    </section>

    <div class="footer">
      <span><span class="heart">‚ô•</span> from Parth</span>
      <span id="dateTag"></span>
    </div>
  </main>

  <div class="modal" id="modal">
    <div class="modal-card">
      <h2>WOOOO LETS GO ü•∞üíò</h2>
      <p>
        You just made my whole week! I've got something special planned for Valentine's Day...
        think music, good food, and maybe a surprise or two if the night goes well.
        Oh, and you might want to wear something nice (not that you don't always look
        gorgeous, but you know... date night vibes). Can't wait to see you :)))
      </p>
      <button class="yes" id="closeBtn">Okay :)))</button>
    </div>
  </div>

  <script>
    // ========== CONFIGURATION - ADJUST THESE VALUES ==========
    const YES_MUSIC_VOLUME = 0.5;        // Volume for music after clicking Yes (0.0 to 1.0)
    const DRUMROLL_VOLUME = 0.8;         // Volume for drumroll sound (0.0 to 1.0)
    const DRUMROLL_BEATS = 10;           // Number of drum emojis to show
    const DRUMROLL_BEAT_INTERVAL = 400;  // Milliseconds between each drum emoji (400ms = 0.4 seconds)
                                         // Total drumroll time = DRUMROLL_BEATS √ó DRUMROLL_BEAT_INTERVAL
                                         // Example: 10 beats √ó 400ms = 4000ms (4 seconds)
    // =========================================================

    document.getElementById("dateTag").textContent =
      new Date().toLocaleDateString(undefined, { month: "short", day: "numeric", year: "numeric" });

    const intro = document.getElementById("intro");
    const drumroll = document.getElementById("drumroll");
    const questionSection = document.getElementById("questionSection");
    const toDrumroll = document.getElementById("toDrumroll");
    const drumAudio = document.getElementById("drumAudio");
    const yesMusic = document.getElementById("yesMusic");
    const drumText = document.getElementById("drumText");

    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const btns = document.getElementById("btns");
    const modal = document.getElementById("modal");
    const closeBtn = document.getElementById("closeBtn");

    const curtainContainer = document.querySelector(".curtain-container");
    const spotlights = document.querySelectorAll(".spotlight");

    // Open curtains and turn on spotlights
    setTimeout(() => {
      curtainContainer.classList.add("curtains-open");
    }, 600);

    setTimeout(() => {
      spotlights.forEach(s => s.classList.add("active"));
    }, 1800);

    // Rose petals
    function createPetal() {
      const petal = document.createElement('div');
      petal.className = 'rose-petal';
      petal.style.left = Math.random() * 100 + 'vw';
      petal.style.animationDuration = (Math.random() * 3 + 5) + 's';
      petal.style.animationDelay = Math.random() * 2 + 's';
      document.body.appendChild(petal);
      setTimeout(() => petal.remove(), 10000);
    }

    setInterval(createPetal, 1200);

    toDrumroll.addEventListener("click", () => {
      intro.classList.add("hidden");
      drumroll.classList.remove("hidden");

      drumAudio.volume = DRUMROLL_VOLUME;
      drumAudio.currentTime = 0;
      const drumPromise = drumAudio.play();
      if (drumPromise !== undefined) {
        drumPromise
          .then(() => console.log("Drumroll started"))
          .catch(err => console.log("Drumroll blocked:", err));
      }

      let beats = 0;
      const interval = setInterval(() => {
        drumText.textContent += " ü•Å";
        beats++;
        if (beats === DRUMROLL_BEATS) {
          clearInterval(interval);
          setTimeout(() => {
            drumroll.classList.add("hidden");
            questionSection.classList.remove("hidden");
          }, 600);
        }
      }, DRUMROLL_BEAT_INTERVAL);
    });

    function moveNoButton() {
      const bounds = btns.getBoundingClientRect();
      const btnBounds = noBtn.getBoundingClientRect();
      
      // Calculate available space
      const maxX = bounds.width - btnBounds.width;
      const maxY = bounds.height - btnBounds.height;
      
      // Get random position, avoiding the current position
      let newX, newY;
      const currentX = parseFloat(noBtn.style.left) || 0;
      const currentY = parseFloat(noBtn.style.top) || 0;
      
      // Ensure the button moves to a significantly different position
      do {
        newX = Math.random() * maxX;
        newY = Math.random() * maxY;
      } while (
        Math.abs(newX - currentX) < maxX / 3 && 
        Math.abs(newY - currentY) < maxY / 3
      );
      
      noBtn.style.position = "absolute";
      noBtn.style.left = newX + "px";
      noBtn.style.top = newY + "px";
    }

    // Add more trigger events for better dodging
    noBtn.addEventListener("mouseenter", moveNoButton);
    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      moveNoButton();
    });
    noBtn.addEventListener("mousemove", moveNoButton);
    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      moveNoButton();
    });

    yesBtn.addEventListener("click", () => {
      // Play the special song when Yes is clicked
      yesMusic.volume = YES_MUSIC_VOLUME;
      const musicPromise = yesMusic.play();
      if (musicPromise !== undefined) {
        musicPromise
          .then(() => console.log("Music started playing"))
          .catch(err => console.log("Music blocked:", err));
      }
      
      modal.classList.add("open");
      burstConfetti();
    });

    closeBtn.addEventListener("click", () => modal.classList.remove("open"));

    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let pieces = [];

    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    function burstConfetti() {
      for (let i = 0; i < 150; i++) {
        pieces.push({
          x: canvas.width / 2,
          y: canvas.height / 3,
          vx: (Math.random() - 0.5) * 14,
          vy: (Math.random() - 0.8) * 16,
          g: 0.28,
          a: 1,
          color: Math.random() > 0.5 ? "#c9184a" : "#ffd700"
        });
      }
      animate();
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      pieces = pieces.filter(p => p.a > 0.02);
      for (const p of pieces) {
        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;
        p.a *= 0.98;
        ctx.globalAlpha = p.a;
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x, p.y, 8, 5);
      }
      if (pieces.length) requestAnimationFrame(animate);
    }
  </script>
</body>
</html>
